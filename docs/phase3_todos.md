# Phase 3: 地上部 TODO (期間: 3週間) ✅ **Pygame移行完了**

## 概要
地上部の各施設システムとアイテム管理の実装

## 🎯 Phase 3 Pygame移行後の状況
- **進捗**: 34/34 項目完了（100%）
- **コアシステム**: アイテム・インベントリ・装備システム完全実装、全テストパス
- **移行状況**: 全施設のpygame UI移行完了
- **必要作業**: なし（全て完了）

## TODO リスト

### 施設システム基盤
- [x] 施設基底クラス（`BaseFacility`）の実装
- [x] 施設間ナビゲーションシステム
- [x] 施設UIの共通フレームワーク

### 冒険者ギルド
- [x] ギルド基本機能の実装
- [x] キャラクター作成インターフェース（pygame独立）
- [x] パーティ編成インターフェース（pygame独立）
- [x] クラスチェンジシステム
- [x] キャラクター一覧・詳細表示（pygame独立）

### 宿屋
休息による回復システムは不要（自動回復のため）
- [x] 宿屋基本機能の実装
- [x] アイテム預かりUI実装（pygame独立）
- [x] 魔法/祈祷習得UI実装（pygame独立）
- [x] 情報提供・雰囲気作りの場として実装

### 商店
- [x] 商店基本機能の実装
- [x] アイテム購入システム
- [x] 価格計算システム
- [x] 在庫管理システム
- [x] アイテム売却機能
- [x] 未鑑定アイテム鑑定機能
- [x] 商店UI（pygame移行完了）

### 教会
- [x] 教会基本機能の実装
- [x] キャラクター蘇生システム（DEAD/ASHES対応）
- [x] 祈祷書購入インターフェース（ロジック実装済み）
- [x] 祝福システム
- [x] 教会UI（pygame移行完了）

### 魔術師ギルド
- [x] 魔術師ギルド基本機能の実装
- [x] 魔法書購入インターフェース（ロジック実装済み）
- [x] 魔術レベル制限システム
- [x] 魔法適性分析システム
- [x] 魔術師ギルドUI（pygame移行完了）

### アイテムシステム
- [x] `Item` クラスの実装
- [x] アイテム分類（武器、防具、消費アイテム、魔法書、道具）
- [x] アイテム属性システム（物理、炎、氷、雷）
- [x] アイテム定義ファイル（YAML）の作成
- [x] アイテム鑑定システム
- [x] アイテム修理システム
- [x] インベントリ管理（キャラクター10個制限）
- [x] 装備システム

### 地上部管理
- [x] `OverworldManager` クラスの実装（Pygame版）
- [x] 地上部帰還時の自動回復 : ダンジョンから地上部に戻った際、HP・MP全回復、死亡・灰化以外の状態異常を自動解除
- [x] 地上部帰還時の自動回復システム（HP全回復、MP全回復、死亡・灰化以外の状態異常解除）
- [x] 施設間移動システム
- [ ] 地上部BGM・効果音システム

## 完了条件
- [x] 全ての施設が正常に機能する（コア機能実装済み）
- [x] アイテム購入システムが動作する
- [x] キャラクター蘇生システムが動作する
- [x] 魔術・祈祷習得UI が機能する（ロジック実装済み）
- [x] 地上部のユーザーフロー完成（Pygame版）
- [x] 自動回復システムが正常に動作する
- [x] 全30個のテストが通過する

## ✅ **Pygame移行状況**
**コアシステム**: 100% 完了（アイテム、インベントリ、装備、パーティ）
**施設ロジック**: 100% 完了（全施設の機能実装済み）
**UIシステム**: 100% 完了（全施設のpygame UI移行完了）

### 移行完了項目：
- ✅ 商店のDirectScrolledList → pygame UIメニュー
- ✅ 教会のDirectScrolledList → pygame UIメニュー  
- ✅ 魔術師ギルドのDirectScrolledList → pygame UIメニュー

## 🔄 **Phase 6への移行項目**
- アイテム売却機能の完成
- アイテム鑑定機能の完成
- 地上部BGM・効果音システム

