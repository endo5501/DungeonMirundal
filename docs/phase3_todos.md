# Phase 3: 地上部 TODO (期間: 3週間)

## 概要
地上部の各施設システムとアイテム管理の実装

## TODO リスト

### 施設システム基盤
- [ ] 施設基底クラス（`BaseFacility`）の実装
- [ ] 施設間ナビゲーションシステム
- [ ] 施設UIの共通フレームワーク

### 冒険者ギルド
- [ ] ギルド基本機能の実装
- [ ] キャラクター作成インターフェース
- [ ] パーティ編成インターフェース
- [ ] クラスチェンジシステム
- [ ] キャラクター一覧・詳細表示

### 宿屋
休息による回復システムは不要（自動回復のため）
- [ ] 宿屋基本機能の実装
- [ ] アイテム預かり機能実行
- [ ] 魔法機能実装
- [ ] 情報提供・雰囲気作りの場として実装

### 商店
- [ ] 商店基本機能の実装
- [ ] アイテム購入システム
- [ ] 価格計算システム
- [ ] 在庫管理システム
- [ ] アイテム売却機能
- [ ] 未鑑定アイテム鑑定機能

### 教会
- [ ] 教会基本機能の実装
- [ ] キャラクター蘇生システム（DEAD/ASHES対応）
- [ ] 祝福システム
- [ ] 状態異常治療システム

### 魔術師ギルド
- [ ] 魔術師ギルド基本機能の実装
- [ ] 魔術習得システム（基本UI）
- [ ] 魔法書購入インターフェース
- [ ] 魔術レベル制限システム
- [ ] 魔法適性分析システム

### アイテムシステム
- [ ] `Item` クラスの実装
- [ ] アイテム分類（武器、防具、消費アイテム、魔法書、道具）
- [ ] アイテム属性システム（物理、炎、氷、雷）
- [ ] アイテム定義ファイル（YAML）の作成
- [ ] アイテム鑑定システム
- [ ] アイテム修理システム
- [ ] インベントリ管理（キャラクター10個制限）
- [ ] 装備システム

### 地上部管理 🔄 **部分完了**
- [ ] `OverworldManager` クラスの実装
- [ ] 地上部帰還時の自動回復 : ダンジョンから地上部に戻った際、HP・MP全回復、死亡・灰化以外の状態異常を自動解除
- [ ] 地上部帰還時の自動回復システム（HP全回復、MP全回復、死亡・灰化以外の状態異常解除）
- [ ] 施設間移動システム
- [ ] 地上部BGM・効果音システム

## 完了条件
- [ ] 全ての施設が正常に機能する
- [ ] アイテム購入システムが動作する
- [ ] キャラクター蘇生システムが動作する
- [ ] 魔術・祈祷習得UI が機能する
- [ ] 地上部のユーザーフロー完成
- [ ] 自動回復システムが正常に動作する
- [ ] 全30個のテストが通過する

## 🔄 **Phase 6への移行項目**
- アイテム売却機能の完成
- アイテム鑑定機能の完成
- 地上部BGM・効果音システム

## Phase 3 実装完了 (2025-06-14)

**実装された主な機能:**
- 施設基底クラス（BaseFacility）とFacilityManager
- 地上部管理システム（OverworldManager）とダンジョン帰還時の自動回復
- アイテムシステム（Item、ItemManager）
- 冒険者ギルド（キャラクター作成・パーティ編成）
- 宿屋（情報提供と雰囲気作り）
- 商店（アイテム購入システム）
- 教会（蘇生・治療・祝福サービス）
- 魔術師ギルド（魔法習得・分析システム）
- 包括的なテストスイート（30個のテストすべて通過）

**Phase 4への引き継ぎ事項:**
- インベントリシステムの実装
- 装備システムの実装
- 魔法・祈祷の詳細システム
- アイテム売却機能の完成

## 次フェーズへの引き継ぎ事項
- 完成した地上部システム
- 動作するアイテム管理
- 整備されたキャラクター管理UI