# Phase 5: 3Dダンジョン探索システム TODO (期間: 4週間)

## 概要
3Dダンジョン探索システムと戦闘システムの実装
Wizardry風の3D視点によるダンジョン探索とターン制戦闘システム

## TODO リスト

### ダンジョン生成システム
- [ ] `DungeonGenerator` クラスの実装
- [ ] ハッシュベースランダム生成アルゴリズム
- [ ] ダンジョン構造データ（部屋、通路、階段）
- [ ] 階層システム（3-20階層）
- [ ] ダンジョン属性システム（物理、炎、氷、雷）
- [ ] 宝箱・トラップ配置システム
- [ ] ダンジョンマップデータ構造

### 3D描画システム（Panda3D）
- [ ] `DungeonRenderer` クラスの実装
- [ ] Wizardry風3D簡易ビューの実装
- [ ] 壁面テクスチャシステム
- [ ] 照明システム（ダンジョン属性による変化）
- [ ] カメラ制御システム（1人称視点）
- [ ] 3Dモデルの配置・管理
- [ ] ミニマップ表示システム（将来実装用基盤）

### ナビゲーションシステム
- [ ] 3D空間での移動システム
- [ ] WASD移動の実装
- [ ] コントローラー移動の実装
- [ ] 壁判定・衝突検出
- [ ] 方向転換システム（90度単位）
- [ ] 階段昇降システム
- [ ] 移動アニメーション
- [ ] 移動音効果

### エンカウンターシステム
- [ ] ランダムエンカウンター実装
- [ ] エンカウンター率調整（歩数カウント）
- [ ] ダンジョン属性に基づくモンスター出現
- [ ] 宝箱発見・解錠システム
- [ ] トラップシステム（検知・解除・発動）
- [ ] イベント発生システム

### モンスターシステム
- [ ] `Monster` クラスの実装
- [ ] モンスター定義ファイル（YAML）の作成
- [ ] 属性・防御・スキル設定
- [ ] レベル・難易度システム
- [ ] 前衛・後衛配置システム（モンスター側）

### 戦闘システム
- [ ] `CombatManager` クラスの実装
- [ ] ターン制戦闘システム
- [ ] 攻撃・防御計算（装備ボーナス含む）
- [ ] 属性相性システム
- [ ] 魔術・祈祷の戦闘での使用
- [ ] 戦闘UI（3D空間内）
- [ ] 戦闘アニメーション
- [ ] ダメージ表示システム
- [ ] 戦闘結果・経験値・アイテム獲得
- [ ] 逃走システム

### ダンジョン管理
- [ ] ダンジョン入口システム
- [ ] ダンジョン選択・生成UI
- [ ] ダンジョンアーカイブシステム
- [ ] 最奥ボス・帰還ポータルシステム
- [ ] レアアイテムドロップシステム
- [ ] ダンジョン進行状態保存
- [ ] パーティ全滅処理

## 完了条件
- [ ] 3Dダンジョンが正常に表示される（Panda3D）
- [ ] WASD・コントローラーでの移動が機能する
- [ ] ランダムエンカウンターが発生する
- [ ] ターン制戦闘が完全に機能する（装備・魔法統合）
- [ ] 宝箱・トラップシステムが動作する
- [ ] 最奥ボス撃破による完了フローが機能する
- [ ] 地上部との遷移が正常に動作する
- [ ] インベントリ・装備システムとの連携が正常

## Phase 6への引き継ぎ事項
- 完成した3Dダンジョンシステム
- 動作する戦闘システム
- 統合された全ゲーム要素（地上部・ダンジョン）
- 最適化準備完了