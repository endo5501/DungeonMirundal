# 現象

冒険者ギルドのクラスチェンジメニューでOK/戻るボタン押下後、メニューが残ったまま閉じない問題

## 詳細

* 冒険者ギルド
    * クラスチェンジ
        * OK/戻る: クラスチェンジのメニューが残ったまま
        * ウィンドウの適切な終了処理が実行されない
        * 重複表示または無反応状態となる

## 原因

クラスチェンジウィンドウの終了処理が適切に実装されていない可能性。WindowManagerのスタック管理やウィンドウクローズ処理に問題がある。

## 影響度

**低～中優先度** - 機能的には利用可能だが、UI体験に影響し、メモリリークの可能性もある

## 関連ファイル

- `src/overworld/facilities/guild.py`
- `src/ui/window_system/class_change_window.py`
- `src/ui/window_system/window_manager.py`

## 修正方針

1. クラスチェンジウィンドウの終了処理を調査
2. WindowManagerのスタック管理を確認
3. ボタンイベント処理でのウィンドウクローズ処理を修正
4. 適切な親ウィンドウへの復帰処理を実装

## 注意

修正の際は、t_wada式のTDDを使用して修正すること
修正完了後、全体テスト(uv run pytest)を実行し、エラーが出ていたら修正すること
作業完了後、このファイルに原因と修正内容について記載すること

---

## 修正記録

（修正時に記録）