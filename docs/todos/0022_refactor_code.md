# TODO

以下の順に、リファクタリング(Fowler式)を実施していきましょう。

1. ✅ @src/character 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

   **実施したリファクタリング：**
   - **Remove Duplicated Code**: 重複メソッド削除（can_use_spell, restore_mp, initialize_status_effects, get_race_name, get_class_name）
   - **Extract Method**: 長いcreate_characterメソッドを小さなメソッドに分割
   - **Replace Magic Number with Named Constant**: class_change.pyで定数化（MIN_LEVEL_FOR_CLASS_CHANGE, DEFAULT_CLASS_CHANGE_COST）
   - **Design Consistency**: vitality統計の適切な使用（HPボーナス計算でstrengthからvitalityに変更）
   - **Defensive Programming**: get_race_name/get_class_nameメソッドにdefaultパラメータ追加
   
   **テスト結果：** キャラクター関連の41テストすべて成功

2. ✅ @src/combat 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

   **実施したリファクタリング：**
   - **Replace Magic Number with Named Constant**: 戦闘定数を13個定数化（命中率、クリティカル率等）
   - **Replace Conditional with Polymorphism**: `_execute_specific_action`をaction_mapでスッキリ
   - **Extract Method**: 長い`_apply_spell_effect`を5つの小さなメソッドに分割
   - **Move Method**: CombatStatsクラスに統計管理メソッドを追加（Data Classからの脱却）
   - **Encapsulate Field**: 統計更新を専用メソッド経由に変更

   **テスト結果：** コンバット関連の32テストすべて成功

3. @src/core 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

4. @src/dungeon 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

5. @src/effects 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

6. @src/encounter 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

7. @src/equipment 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

8. @src/inventory 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

9. @src/items 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

10. @src/magic 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

11. @src/monsters 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

12. @src/navigation 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

13. @src/overworld 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

14. @src/rendering 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

15. @src/ui 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

16. @src/utils 以下のコードをFowler式のリファクタリングしましょう。
    明らかに使用されていない処理(特にPanda3D用コード)やファイルは削除しましょう。
    リファクタリング後、テストを実施しエラーを確実に解消してください
    完了後、作業内容をこちらに記載した後一旦commitしてください

