# Change Specification

変更を希望する仕様について記述する
新仕様(New Specifications)に記載されている仕様を検討し、修正を行ってください
修正後、必ずテストを実施し、変更された仕様(Changed Specifications)へ移動してください

## New Specifications

- [x] 宿屋、商店、教会、魔術師ギルドに入ると、最初のテキストメッセージとUIのボタンが重複している。UIのボタンを下部に横一列で並べることはできないか
- [ ] 魔術師ギルドの魔法適性分析が、問答無用で300Gかかるのは良くない。
- [x] 地上メニューはボタンがセンタリングされているが、左寄せにしてほしい。将来、右側に簡単な町のイラストを載せる予定のため
- [ ] 宿屋にて、パーティ名を変更する機能を追加してほしい
- [ ] 宿屋の[宿泊について]は不要です。代わりに、ダンジョンから戻った際「無事町に戻り、治療を受けた」というメッセージを出せばよいです。
- [ ] 教会の[治療サービス]は不要です
- [ ] 教会に[祈祷書購入]というメニューを追加し、魔術師ギルドの[魔法書購入]ではなく教会の[祈祷書購入]で販売するようにしてください
- [ ] 設定画面の[パーティ状況]にて、より詳細な情報(力などのパラメータ、持ち物)を確認できるようにしてください
- [x] キャラクタ作成画面において、各ボタンのフォントをもう少し小さくし、ボタン間の間隔を広げるべき。また、ボタン以外の表記と表示位置が被るので、ボタンを画面の下方に配置するべき
- [ ] 魔法分析の[魔法使用回数確認]が未実装です


## Changed Specifications

- [x] 宿屋、商店、教会、魔術師ギルドに入ると、最初のテキストメッセージとUIのボタンが重複している。UIのボタンを下部に横一列で並べることはできないか
  - 実装完了: 全施設メニューで横一列ボタン配置を実装
  - 変更内容: UIMenu._rebuild_menu()メソッドを修正し、ボタンを画面下部(-0.4)に横配置
  - 特徴: 項目数に応じた自動サイズ調整、中央揃え、画面幅内配置保証
  - テスト: 6つの包括的テストケースで検証完了（100%通過）
  - 関連ファイル: src/ui/base_ui.py, tests/test_facility_button_layout_fix.py
  - 完了日: 2025-06-16

- [x] 地上メニューはボタンがセンタリングされているが、左寄せにしてほしい。将来、右側に簡単な町のイラストを載せる予定のため
  - 実装完了: UIMenuとUIDialogクラスにalignment機能を追加、地上メニューを左寄せ配置に変更
  - 変更内容: alignmentパラメータ("left", "center", "right")追加、位置計算メソッド実装
  - 特徴: 左寄せ時のボタン間隔最適化(0.25)、右側スペース確保、タイトルテキスト連動配置
  - 対象メニュー: 地上メインメニュー(overworld_main_menu)が左寄せに変更
  - テスト: 7つの包括的テストケースで検証完了（100%通過）
  - 関連ファイル: src/ui/base_ui.py, src/overworld/overworld_manager.py, tests/test_overworld_menu_left_alignment.py
  - 完了日: 2025-06-16

- [x] キャラクタ作成画面において、各ボタンのフォントをもう少し小さくし、ボタン間の間隔を広げるべき。また、ボタン以外の表記と表示位置が被るので、ボタンを画面の下方に配置するべき
  - 実装完了: UIMenuとUIDialogクラスにcharacter_creation_mode機能を追加、キャラクター作成画面のUI配置を最適化
  - 変更内容: character_creation_modeパラメータ追加、専用の位置・サイズ・間隔設定を実装
  - 特徴: ボタンを画面下部配置(-0.45/-0.35)、フォントサイズ縮小(0.35)、間隔拡大(0.3/0.6)、テキスト重複回避
  - 対象画面: 種族選択、職業選択、能力値確認、作成確認の全キャラクター作成ステップ
  - UI改善: ボタンスケール縮小(0.25,0.12)、視覚的分離強化、操作性向上
  - テスト: 6つの包括的テストケースで検証完了（100%通過）
  - 関連ファイル: src/ui/base_ui.py, src/ui/character_creation.py, tests/test_character_creation_ui_improvements.py
  - 完了日: 2025-06-16
