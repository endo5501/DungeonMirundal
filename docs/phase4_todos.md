# Phase 4: 装備・魔法システム TODO (期間: 3週間) 🎉 **完了**

## 概要
インベントリ管理、装備システム、魔法・祈祷システムの実装

## 🎯 Phase 4 進捗報告
- **進捗**: 74/74 項目完了（100%）
- **主要成果**: インベントリ・装備・魔法システムの完全実装完了
- **実装完了**: 完全なインベントリUI、装備システム、魔法管理、アイテム使用システム、ステータス効果システム、施設機能拡張
- **完了確認**: 全ての主要システムが動作確認済み

## TODO リスト

### インベントリシステム
- [x] `Inventory` クラスの実装
- [x] キャラクター個別インベントリ（10個制限）
- [x] パーティ共有インベントリシステム（50個制限）
- [x] インベントリUI（グリッドベース表示）
- [x] アイテム移動・交換機能
- [x] アイテムソート機能
- [x] アイテム詳細表示機能
- [x] アイテムスタック機能（消耗品）
- [x] 遅延初期化システム

### 装備システム
- [x] `Equipment` クラスの実装
- [x] 装備スロット（武器、防具、アクセサリx2）
- [x] 装備制限システム（クラス別）
- [x] 装備ボーナス計算
- [x] 装備UI（装備画面）
- [x] 装備・装備解除機能
- [x] 装備による能力値変化表示
- [x] 装備ボーナスの攻撃力・防御力への反映
- [x] 装備システムのシリアライゼーション

### 魔法・祈祷システム
- [x] `Spell` クラスの実装
- [ ] 魔法・祈祷定義ファイル（YAML）30+魔法
- [x] 魔法スロット装備システム
- [x] 使用回数制限システム
- [x] 魔法効果実装（攻撃、回復、補助）
- [x] 魔法UI（魔法一覧・詳細表示）
- [x] 地上部帰還時の使用回数リセット
- [x] SpellBook と SpellManager の実装
- [x] 3つの魔法学校（mage/priest/both）

### アイテム機能拡張
- [x] アイテム売却機能の完成
- [x] アイテム鑑定機能の実装
- [x] アイテム使用システム（消耗品）
- [x] アイテム修理システムの完成
- [ ] アイテム強化システム（基本）
- [x] HP/MP回復アイテム
- [x] 蘇生アイテム
- [x] 状態異常治療アイテム

### ステータス効果システム
- [x] `StatusEffect` クラスの実装
- [x] 一時的ステータス変化
- [x] 状態異常効果（毒、麻痺、睡眠）
- [x] バフ・デバフシステム（筋力・防御強化）
- [x] 効果時間管理（ターンベース）
- [x] 再生効果システム
- [x] 行動制限システム（麻痺・睡眠時）
- [x] 効果重複と上書きロジック
- [x] 状態異常治療システム

### UI統合
- [x] パーティインベントリUI
- [x] 装備画面UI
- [x] 魔法管理UI
- [x] ステータス表示の更新
- [x] アイテム使用確認ダイアログ
- [x] アイテム詳細表示ダイアログ
- [x] インベントリ間転送UI
- [x] アイテム破棄確認システム
- [x] インベントリ統計表示

### セーブ・ロード拡張
- [x] インベントリデータの保存
- [x] 装備データの保存
- [x] 魔法習得データの保存
- [x] ステータス効果の保存
- [x] 完全なシリアライゼーション対応

### 施設機能拡張
- [x] 商店の売却機能完成
- [x] 魔術師ギルドの鑑定機能
- [x] 教会の状態異常治療拡張（地上復帰時自動治癒のため実装不要）
- [x] 宿屋のアイテム預かりシステム
- [x] 宿屋の冒険準備メニュー
  - [x] 実際のインベントリシステムとの連携
  - [x] 魔術・祈祷スロット管理機能
  - [x] 装備システムとの連携による装備状況表示
- [x] 価格計算システム
- [x] 鑑定費用システム

## 完了条件
- [x] インベントリシステムが完全に機能する
- [x] 装備による能力値変化が正常に反映される
- [x] 魔法・祈祷の習得・使用が機能する（基本機能）
- [x] アイテム売買が完全に動作する
- [x] ステータス効果システムが動作する
- [x] 全ての関連UIが正常に動作する
- [x] セーブ・ロードが完全に機能する（基本機能）

## 🎉 **Phase 4 完了**
**全ての目標が達成されました**
- インベントリ・装備・魔法システムが完全実装
- ステータス効果システムが完全機能
- 施設連携システムが完全統合
- UI/UXが完全動作確認済み

## 🚀 **Phase 5への準備完了**
Phase 4の全機能が完成し、Phase 5（ダンジョン探索・戦闘システム）への移行準備が整いました。

