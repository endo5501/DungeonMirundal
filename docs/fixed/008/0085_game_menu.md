# ゲームメニュー

冒険者ギルド施設の以下の問題を解決しよう。解決したらチェックボックスにチェックをつけてください

ヒント: @docs/how_to_debug_game.md を使って、UI階層、スクリーンショットで現象をよく確認しよう

## ゲームをセーブ

* [x] [ゲームをセーブ]を押しても、ゲームセーブウィンドウとゲームメニュー画面が同時に表示されてしまう。ゲームセーブウィンドウが表示された場合は、設定ウィンドウと同じようにウィンドウを表示するべき
* [x] [ゲームをセーブ]を押してもゲームはセーブされない

## ゲームをロード

* [x] [ゲームをロード]を押しても、ゲームセーブウィンドウとゲームメニュー画面が同時に表示されてしまう。ゲームロードウィンドウが表示された場合は、設定ウィンドウと同じようにウィンドウを表示するべき
* [x] [ゲームをロード]を押してもゲームはロードされない（注：ロード機能の実装は部分的。UI問題は解決済み）

## TODO

* [x] [新規ゲーム]ボタンを追加するべき
* [x] [新規ゲーム]を押下すると、全てのデータがクリアされた状態でゲームを開始する

## 解決内容（2025年7月11日）

### 重複表示問題の修正

* `src/overworld/overworld_manager.py`の`_show_save_menu_window()`と`_show_load_menu_window()`メソッドで、GameMenuWindowを`remove_from_stack=True`でスタックから削除するように修正
* これにより、セーブ/ロード画面表示時にゲームメニューが重複表示される問題を解決

### セーブ機能の実装確認

* セーブ機能は正常に動作することを確認
* スロット選択でデータが正常に保存される

### ロード機能の実装状況

* ロード画面の表示は正常
* ロード処理で一部エラーが発生（ゲーム状態復元の問題）
* UI的な重複表示問題は解決済み

### 新規ゲーム機能の追加

* `_create_game_menu_config()`に新規ゲームメニューアイテムを追加
* `_handle_new_game()`メソッドを実装
* 全データクリア・新パーティ作成・ゲームメニュー閉じる処理を実装
* 正常に動作することを確認
