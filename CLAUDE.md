# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 開発環境

### パッケージ管理
- `uv` を使用してPythonパッケージを管理
- 依存関係のインストール: `uv install`
- 新しいパッケージの追加: `uv add package_name`

### 実行コマンド
- アプリケーション実行: `python main.py`
- 仮想環境での実行: `uv run python main.py`
- Pygame依存関係追加: `uv add pygame`
- テスト実行: `uv run pytest`

## プロジェクト構成

### アーキテクチャ概要
- Python製のクラシックなダンジョン探索RPG
- **Pygame**を使用した2Dダンジョン探索
- トップダウン/サイドビューによる2D視覚表現
- 外部ファイル（JSON/YAML）による設定管理でハードコーディングを回避
- 地上パートとダンジョン探索パートの二つの主要セクション
- WASD + コントローラー対応

### 設計思想
- **外部ファイル管理**: テキスト、キャラクター、アイテム、モンスター等はすべて外部ファイルで管理
- **多言語化対応**: 翻訳ファイルの差し替えによる多言語化
- **モジュール分離**: コンポーネントの独立性を重視した構造
- **ハッシュベース生成**: ダンジョンの構造や難易度をハッシュ値で決定

### 主要機能領域
- **地上部**: 冒険者ギルド、宿屋、商店、教会等の施設管理
- **ダンジョン**: ランダム生成による2D探索、戦闘システム
- **キャラクター**: 種族・職業・パーティ編成システム
- **アイテム**: 武器・防具・消費アイテムの管理
- **魔術・祈祷**: スロット装備による魔法システム

### 開発方針
- テスト駆動開発（TDD）を採用
- テストファースト、実装は後
- テストが通過してからコミット
- 修正完了後はまとめてコミット（コミットメッセージは英語）

## 開発計画
- **総開発期間**: 14週間（6フェーズ）
- **Phase 1**: 基盤構築（Pygame環境）
- **Phase 2**: コア機能（キャラクター・UI）✅ 完了
- **Phase 3**: 地上部（施設システム）✅ 完了
- **Phase 4**: 装備・魔法システム ✅ 完了
- **Phase 5**: ダンジョン（2D探索・戦闘）
- **Phase 6**: 統合・最適化

各フェーズの詳細TODO: `docs/phase*_todos.md`
不具合: `docs/bugs.md`

## 作業後のTODO管理
- 作業後、TODOファイルを更新してください

## 関連資料
- [Pygame Documentation](https://www.pygame.org/docs/)
