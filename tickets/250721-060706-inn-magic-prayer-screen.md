---
priority: 2
tags: ["feature", "ui", "inn", "magic", "prayer"]
description: "宿屋の魔術/祈祷画面の未実装機能を追加"
created_at: "2025-07-21T06:07:06Z"
started_at: null  # Do not modify manually
closed_at: null   # Do not modify manually
---

# Ticket Overview

宿屋のキャラクター詳細画面において、魔術/祈祷管理機能が未実装となっている。現在は「未実装」というプレースホルダーが表示されるのみで、実際の呪文スロット管理ができない状態。この機能を実装し、宿屋でキャラクターの魔術/祈祷スロットを管理できるようにする。

## 背景
- 宿屋のキャラクター詳細画面には魔術/祈祷タブが存在するが、機能が未実装
- 魔法使い系・僧侶系キャラクターは呪文スロットの管理が重要
- 安全な宿屋で呪文構成を検討・変更したいニーズがある
- 既存の魔術/祈祷システムとの連携が必要

## Tasks

- [ ] 現在の宿屋魔術/祈祷画面の実装状況を調査
- [ ] 魔術/祈祷システムの仕様を確認（スロット数、レベル制限等）
- [ ] 魔術/祈祷管理UIのデザイン設計（利用可能呪文、装備スロット）
- [ ] キャラクターの習得呪文一覧表示機能の実装
- [ ] 呪文スロットへの装備/解除機能の実装
- [ ] 呪文レベルとスロット制限のバリデーション実装
- [ ] 魔術と祈祷の切り替え機能（該当キャラクターの場合）
- [ ] スロット変更時の確認ダイアログ実装
- [ ] 変更内容の永続化（セーブ機能との連携）
- [ ] 呪文説明文の表示機能
- [ ] 日本語表示の確認と調整（呪文名、説明文）
- [ ] ユニットテストの作成
- [ ] 統合テストの実施
- [ ] Run tests before closing and pass all tests (No exceptions)
- [ ] Get developer approval before closing

## 受け入れ条件
- [ ] キャラクターが習得している呪文の一覧が確認できる
- [ ] 呪文をスロットに装備/解除できる
- [ ] 呪文レベルに応じたスロット制限が正しく機能する
- [ ] 魔術師は魔術、僧侶は祈祷のみ装備可能（職業制限）
- [ ] 各呪文の効果説明が日本語で表示される
- [ ] スロット変更後の状態がセーブ/ロードで保持される
- [ ] UIが他の宿屋機能と一貫性を持つ
- [ ] エラーメッセージが適切に表示される

## Notes

- 宿屋では呪文の使用はできないが、スロット管理は自由
- 呪文スロット数はキャラクターのレベルと職業に依存
- 魔術と祈祷は別システムとして扱う（混在不可）
- 未習得呪文は表示しない（習得済みのみ管理対象）
- ダンジョン内でのスロット変更との差別化を考慮
